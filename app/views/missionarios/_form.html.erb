<% form_for(@missionario) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :nome %><br />
    <%= f.text_field :nome, :size => 65 %>
  </p>
  <p>
    <%= f.label :nome_cracha, "Como você gostaria de ser chamado? (nome no crachá)" %><br />
    <%= f.text_field :nome_cracha, :size => 65 %>
  </p>
  <p>
    <%= f.label :nascimento %><br />
    <%= f.date_select :nascimento, :end_year => 1900, :start_year =>
    Time.now.year, :use_month_names => [ 'Janeiro', 'Fevereiro',
    'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro',
    'Outubro', 'Novembro', 'Dezembro' ], :order => [ :day, :month,
    :year ],  :include_blank => true  %>
  </p>
  <p>
    <%= f.label :endereco %><br />
    <%= f.text_field :endereco, :size => 65 %>
  </p>
  <p>
    <%= f.label :bairro %><br />
    <%= f.text_field :bairro %>
  </p>
  <p>
    <%= f.label :cidade %><br />
    <% defcid = @missionario.cidade; defcid = "Rio de Janeiro" if defcid == nil %> 
    <%= f.text_field :cidade, :value => defcid %>
  </p>
  <p>
    <%= f.label :estado %><br />
    <%= f.collection_select :estado_id, Estado.find(:all), :id, :sigla, { :selected => 12 } %>
  </p>
  <p>
    <%= f.label :cep, "CEP (só números)" %><br />
    <%= f.text_field :cep, :size => 6 %>
  </p>
  <p>
    <%= f.label :paroquia, "Paróquia"  %><br /> 
    <%= f.collection_select :paroquia_id, Paroquia.find(:all).sort_by { |k| k.bairro + " " + k.nome }, :id, :nome_e_bairro %>
  </p>
  <p>
    Telefone residencial<br />
    <%= f.label :ddd_casa, "DDD" -%>
    <% defddd = @missionario.ddd_casa; defddd = "21" if @missionario.ddd_casa == nil %>
    <%= f.text_field :ddd_casa, :value => defddd, :size => 1 -%>
    <%= f.label :telefone_casa, "Telefone" -%>
    <%= f.text_field :telefone_casa, :size => 7 -%>
  </p>
  <p>
    Telefone comercial<br />
    <%= f.label :ddd_trabalho, "DDD" -%>
    <% defddd = @missionario.ddd_trabalho; defddd = "21" if @missionario.ddd_trabalho == nil %>
    <%= f.text_field :ddd_trabalho, :value => defddd, :size => 1 -%>
    <%= f.label :telefone_trabalho, "Telefone" -%>
    <%= f.text_field :telefone_trabalho, :size => 7 -%>
  </p>
  <p>
    Telefone Celular<br />
    <%= f.label :ddd_celular, "DDD" -%>
    <% defddd = @missionario.ddd_celular; defddd = "21" if @missionario.ddd_celular == nil %>
    <%= f.text_field :ddd_celular, :value => defddd, :size => 1 -%>
    <%= f.label :telefone_celular, "Telefone" -%>
    <%= f.text_field :telefone_celular, :size => 7 -%>
  </p>

  <p>
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </p>
  <p>
    <%= f.label :profissao %><br />
    <%= f.text_field :profissao %>
  </p>

  <p>
    <%= f.label :sacramentos_recebidos %><br />
    <% for sacramento in Sacramento.find(:all) %>
    <div>
      <%= check_box_tag "missionario[sacramento_ids][]", sacramento.id, 
	  @missionario.sacramentos.include?(sacramento) %>
      <%= sacramento.nome %>
    </div>
    <% end %>
  </p>
  <p>
    <%= f.label :movimentos_pastorais, "Movimentos ou pastorais de que participa (liste todos)" %><br />
    <%= f.text_area :movimentos_pastorais %>
  </p>
  <p>
    <%= f.label :nivel, "Função no Conselho Missionário" %><br />
    <%= f.select :nivel, [["Missionário",4],["Coordenador de Diocese",0],["Coordenador de Vicariato",1],["Coordenador de Forania",2],["Coordenador de Paróquia",3],["Assessor Eclesial",5]] %> 
  </p>
  <p>
    <%= f.label :atividades, "O que você está disposto a fazer como trabalho missionário?" %><br />
    <%= f.text_area :atividades %>
  </p>

  <p>
    <%= f.submit "Salvar" %>
  </p>
<% end %>
